import time
from robotController import RobotController
from systemIdentificationDataCollector import SystemIdentificationDataCollector
from blockSystemIdentification import BlockSystemIdentification

if __name__ == "__main__":
    robot = RobotController("COM5", 115200)

    try:
        robot.calibrate()

        system_identification = BlockSystemIdentification(robot, joint="shoulder", filename="shoulder_data.csv", blocks=2)
        system_identification.run()

    except KeyboardInterrupt:
        print("\nInterrupted! Stopping robot for safety.")
        robot.stop()

    finally:
        robot.close()
